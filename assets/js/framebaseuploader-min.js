var qq=function(b){return{hide:function(){b.style.display="none";return this},attach:function(d,a){if(b.addEventListener){b.addEventListener(d,a,false)}else{if(b.attachEvent){b.attachEvent("on"+d,a)}}return function(){qq(b).detach(d,a)}},detach:function(d,a){if(b.removeEventListener){b.removeEventListener(d,a,false)}else{if(b.attachEvent){b.detachEvent("on"+d,a)}}return this},contains:function(a){if(b===a){return true}if(b.contains){return b.contains(a)}else{return!!(a.compareDocumentPosition(b)&8)}},insertBefore:function(a){a.parentNode.insertBefore(b,a);return this},remove:function(){b.parentNode.removeChild(b);return this},css:function(a){if(a.opacity!==null){if(typeof b.style.opacity!=="string"&&typeof(b.filters)!=="undefined"){a.filter="alpha(opacity="+Math.round(100*a.opacity)+")"}}qq.extend(b.style,a);return this},hasClass:function(a){var d=new RegExp("(^| )"+a+"( |$)");return d.test(b.className)},addClass:function(a){if(!qq(b).hasClass(a)){b.className+=" "+a}return this},removeClass:function(a){var d=new RegExp("(^| )"+a+"( |$)");b.className=b.className.replace(d," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(f){var e,a=[];if(b.querySelectorAll){return b.querySelectorAll("."+f)}e=b.getElementsByTagName("*");qq.each(e,function(d,c){if(qq(c).hasClass(f)){a.push(c)}});return a},children:function(){var a=[],d=b.firstChild;while(d){if(d.nodeType===1){a.push(d)}d=d.nextSibling}return a},setText:function(a){b.innerText=a;b.textContent=a;return this},clearText:function(){return qq(b).setText("")}}};qq.log=function(d,c){if(window.console){if(!c||c==="info"){window.console.log(d)}else{if(window.console[c]){window.console[c](d)}else{window.console.log("<"+c+"> "+d)}}}};qq.isObject=function(b){return b!==null&&b&&typeof(b)==="object"&&b.constructor===Object};qq.isFunction=function(b){return typeof(b)==="function"};qq.isFileOrInput=function(b){if(window.File&&b instanceof File){return true}else{if(window.HTMLInputElement){if(b instanceof HTMLInputElement){if(b.type&&b.type.toLowerCase()==="file"){return true}}}else{if(b.tagName){if(b.tagName.toLowerCase()==="input"){if(b.type&&b.type.toLowerCase()==="file"){return true}}}}}return false};qq.isXhrUploadSupported=function(){var b=document.createElement("input");b.type="file";return(b.multiple!==undefined&&typeof File!=="undefined"&&typeof FormData!=="undefined"&&typeof(new XMLHttpRequest()).upload!=="undefined")};qq.isFolderDropSupported=function(b){return(b.items&&b.items[0].webkitGetAsEntry)};qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(File.prototype.slice||File.prototype.webkitSlice||File.prototype.mozSlice)};qq.extend=function(f,d,e){qq.each(d,function(a,b){if(e&&qq.isObject(b)){if(f[a]===undefined){f[a]={}}qq.extend(f[a],b,true)}else{f[a]=b}})};qq.indexOf=function(e,h,g){if(e.indexOf){return e.indexOf(h,g)}g=g||0;var f=e.length;if(g<0){g+=f}for(;g<f;g+=1){if(e.hasOwnProperty(g)&&e[g]===h){return g}}return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var c=Math.random()*16|0,e=f=="x"?c:(c&3|8);return e.toString(16)})};qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!==-1};qq.ie10=function(){return navigator.userAgent.indexOf("MSIE 10")!==-1};qq.safari=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Apple")!==-1};qq.chrome=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Google")!==-1};qq.firefox=function(){return(navigator.userAgent.indexOf("Mozilla")!==-1&&navigator.vendor!==undefined&&navigator.vendor==="")};qq.windows=function(){return navigator.platform==="Win32"};qq.android=function(){return navigator.userAgent.toLowerCase().indexOf("android")!==-1};qq.preventDefault=function(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}};qq.toElement=(function(){var b=document.createElement("div");return function(d){b.innerHTML=d;var a=b.firstChild;b.removeChild(a);return a}}());qq.each=function(h,g){var f,e;if(h){for(f in h){if(Object.prototype.hasOwnProperty.call(h,f)){e=g(f,h[f]);if(e===false){break}}}}};qq.obj2url=function(m,i,k){var p,j,l=[],o="&",n=function(b,c){var a=i?(/\[\]$/.test(i))?i:i+"["+c+"]":c;if((a!=="undefined")&&(c!=="undefined")){l.push((typeof b==="object")?qq.obj2url(b,a,true):(Object.prototype.toString.call(b)==="[object Function]")?encodeURIComponent(a)+"="+encodeURIComponent(b()):encodeURIComponent(a)+"="+encodeURIComponent(b))}};if(!k&&i){o=(/\?/.test(i))?(/\?$/.test(i))?"":"&":"?";l.push(i);l.push(qq.obj2url(m))}else{if((Object.prototype.toString.call(m)==="[object Array]")&&(typeof m!=="undefined")){for(p=-1,j=m.length;p<j;p+=1){n(m[p],p)}}else{if((typeof m!=="undefined")&&(m!==null)&&(typeof m==="object")){for(p in m){if(m.hasOwnProperty(p)){n(m[p],p)}}}else{l.push(encodeURIComponent(i)+"="+encodeURIComponent(m))}}}if(i){return l.join(o)}else{return l.join(o).replace(/^&/,"").replace(/%20/g,"+")}};qq.obj2FormData=function(f,d,e){if(!d){d=new FormData()}qq.each(f,function(b,a){b=e?e+"["+b+"]":b;if(qq.isObject(a)){qq.obj2FormData(a,d,b)}else{if(qq.isFunction(a)){d.append(encodeURIComponent(b),encodeURIComponent(a()))}else{d.append(encodeURIComponent(b),encodeURIComponent(a))}}});return d};qq.obj2Inputs=function(f,d){var e;if(!d){d=document.createElement("form")}qq.obj2FormData(f,{append:function(b,a){e=document.createElement("input");e.setAttribute("name",b);e.setAttribute("value",a);d.appendChild(e)}});return d};qq.setCookie=function(j,i,h){var f=new Date(),g="";if(h){f.setTime(f.getTime()+(h*24*60*60*1000));g="; expires="+f.toGMTString()}document.cookie=j+"="+i+g+"; path=/"};qq.getCookie=function(c){var i=c+"=",g=document.cookie.split(";"),h;for(var j=0;j<g.length;j++){h=g[j];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(i)===0){return h.substring(i.length,h.length)}}};qq.getCookieNames=function(d){var e=document.cookie.split(";"),f=[];qq.each(e,function(c,b){b=b.trim();var a=b.indexOf("=");if(b.match(d)){f.push(b.substr(0,a))}});return f};qq.deleteCookie=function(b){qq.setCookie(b,"",-1)};qq.areCookiesEnabled=function(){var c=Math.random()*100000,d="qqCookieTest:"+c;qq.setCookie(d,1);if(qq.getCookie(d)){qq.deleteCookie(d);return true}return false};qq.parseJson=function(json){if(typeof JSON.parse==="function"){return JSON.parse(json)}else{return eval("("+json+")")}};qq.DisposeSupport=function(){var b=[];return{dispose:function(){var a;do{a=b.shift();if(a){a()}}while(a)},attach:function(){var a=arguments;this.addDisposer(qq(a[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(a){b.push(a)}}};qq.UploadButton=function(b){this._options={element:null,multiple:false,acceptFiles:null,name:"file",onChange:function(a){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,b);this._disposeSupport=new qq.DisposeSupport();this._element=this._options.element;qq(this._element).css({position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){if(this._input.parentNode){qq(this._input).remove()}qq(this._element).removeClass(this._options.focusClass);this._input=this._createInput()},_createInput:function(){var c=document.createElement("input");if(this._options.multiple){c.setAttribute("multiple","multiple")}if(this._options.acceptFiles){c.setAttribute("accept",this._options.acceptFiles)}c.setAttribute("type","file");c.setAttribute("name",this._options.name);qq(c).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});this._element.appendChild(c);var d=this;this._disposeSupport.attach(c,"change",function(){d._options.onChange(c)});this._disposeSupport.attach(c,"mouseover",function(){qq(d._element).addClass(d._options.hoverClass)});this._disposeSupport.attach(c,"mouseout",function(){qq(d._element).removeClass(d._options.hoverClass)});this._disposeSupport.attach(c,"focus",function(){qq(d._element).addClass(d._options.focusClass)});this._disposeSupport.attach(c,"blur",function(){qq(d._element).removeClass(d._options.focusClass)});if(window.attachEvent){c.setAttribute("tabIndex","-1")}return c}};qq.DragAndDrop=function(A){var o,q,r,C=[],u=0,z=0,s=new qq.DisposeSupport();o={dropArea:null,extraDropzones:[],hideDropzones:true,multiple:true,classes:{dropActive:null},callbacks:{dropProcessing:function(b,a){},error:function(a,b){},log:function(b,a){}}};qq.extend(o,A);function D(){if(u===z&&!r){o.callbacks.log("Grabbed "+C.length+" files after tree traversal.");q.dropDisabled(false);o.callbacks.dropProcessing(false,C)}}function x(a){C.push(a);z+=1;D()}function w(a){var b,c;u+=1;if(a.isFile){a.file(function(d){x(d)})}else{if(a.isDirectory){r=true;b=a.createReader();b.readEntries(function(d){z+=1;for(c=0;c<d.length;c+=1){w(d[c])}r=false;if(!d.length){D()}})}}}function t(a){var c,d,b;o.callbacks.dropProcessing(true);q.dropDisabled(true);if(a.files.length>1&&!o.multiple){o.callbacks.dropProcessing(false);o.callbacks.error("tooManyFilesError","");q.dropDisabled(false)}else{C=[];u=0;z=0;if(qq.isFolderDropSupported(a)){d=a.items;for(c=0;c<d.length;c+=1){b=d[c].webkitGetAsEntry();if(b){if(b.isFile){C.push(d[c].getAsFile());if(c===d.length-1){D()}}else{w(b)}}}}else{o.callbacks.dropProcessing(false,a.files);q.dropDisabled(false)}}}function B(a){q=new qq.UploadDropZone({element:a,onEnter:function(b){qq(a).addClass(o.classes.dropActive);b.stopPropagation()},onLeaveNotDescendants:function(b){qq(a).removeClass(o.classes.dropActive)},onDrop:function(b){if(o.hideDropzones){qq(a).hide()}qq(a).removeClass(o.classes.dropActive);t(b.dataTransfer)}});s.addDisposer(function(){q.dispose()});if(o.hideDropzones){qq(a).hide()}}function v(a){var b;qq.each(a.dataTransfer.types,function(d,c){if(c==="Files"){b=true;return false}});return b}function y(){if(o.dropArea){o.extraDropzones.push(o.dropArea)}var b,a=o.extraDropzones;for(b=0;b<a.length;b+=1){B(a[b])}if(o.dropArea&&(!qq.ie()||qq.ie10())){s.attach(document,"dragenter",function(c){if(!q.dropDisabled()&&v(c)){if(qq(o.dropArea).hasClass(o.classes.dropDisabled)){return}o.dropArea.style.display="block";for(b=0;b<a.length;b+=1){a[b].style.display="block"}}})}s.attach(document,"dragleave",function(c){if(o.hideDropzones&&qq.FineUploader.prototype._leaving_document_out(c)){for(b=0;b<a.length;b+=1){qq(a[b]).hide()}}});s.attach(document,"drop",function(c){if(o.hideDropzones){for(b=0;b<a.length;b+=1){qq(a[b]).hide()}}c.preventDefault()})}return{setup:function(){y()},setupExtraDropzone:function(a){o.extraDropzones.push(a);B(a)},removeExtraDropzone:function(a){var b,c=o.extraDropzones;for(b in c){if(c[b]===a){return c.splice(b,1)}}},dispose:function(){s.dispose();q.dispose()}}};qq.UploadDropZone=function(t){var l,r,n,q,o=new qq.DisposeSupport();l={element:null,onEnter:function(a){},onLeave:function(a){},onLeaveNotDescendants:function(a){},onDrop:function(a){}};qq.extend(l,t);r=l.element;function v(){return qq.safari()||(qq.firefox()&&qq.windows())}function s(a){if(!q){if(v){o.attach(document,"dragover",function(b){b.preventDefault()})}else{o.attach(document,"dragover",function(b){if(b.dataTransfer){b.dataTransfer.dropEffect="none";b.preventDefault()}})}q=true}}function u(c){if(qq.ie()&&!qq.ie10()){return false}var d,a=c.dataTransfer,b=qq.safari();d=qq.ie10()?true:a.effectAllowed!=="none";return a&&d&&(a.files||(!b&&a.types.contains&&a.types.contains("Files")))}function m(a){if(a!==undefined){n=a}return n}function p(){o.attach(r,"dragover",function(a){if(!u(a)){return}var b=qq.ie()?null:a.dataTransfer.effectAllowed;if(b==="move"||b==="linkMove"){a.dataTransfer.dropEffect="move"}else{a.dataTransfer.dropEffect="copy"}a.stopPropagation();a.preventDefault()});o.attach(r,"dragenter",function(a){if(!m()){if(!u(a)){return}l.onEnter(a)}});o.attach(r,"dragleave",function(a){if(!u(a)){return}l.onLeave(a);var b=document.elementFromPoint(a.clientX,a.clientY);if(qq(this).contains(b)){return}l.onLeaveNotDescendants(a)});o.attach(r,"drop",function(a){if(!m()){if(!u(a)){return}a.preventDefault();l.onDrop(a)}})}s();p();return{dropDisabled:function(a){return m(a)},dispose:function(){o.dispose()}}};qq.UploadHandler=function(i){var h=[],l,k,j,g;l={debug:false,forceMultipart:true,paramsInBody:false,paramsStore:{},endpointStore:{},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:false,partSize:2000000,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:false,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},log:function(b,a){},onProgress:function(a,b,d,c){},onComplete:function(a,b,d,c){},onCancel:function(a,b){},onUpload:function(a,b){},onUploadChunk:function(a,b,c){},onAutoRetry:function(a,b,d,c){},onResume:function(a,b,c){}};qq.extend(l,i);k=l.log;j=function(a){var c=qq.indexOf(h,a),d=l.maxConnections,b;h.splice(c,1);if(h.length>=d&&c<d){b=h[d-1];g.upload(b)}};if(qq.isXhrUploadSupported()){g=new qq.UploadHandlerXhr(l,j,k)}else{g=new qq.UploadHandlerForm(l,j,k)}return{add:function(a){return g.add(a)},upload:function(a){var b=h.push(a);if(b<=l.maxConnections){return g.upload(a)}},retry:function(a){var b=qq.indexOf(h,a);if(b>=0){return g.upload(a,true)}else{return this.upload(a)}},cancel:function(a){k("Cancelling "+a);l.paramsStore.remove(a);g.cancel(a);j(a)},cancelAll:function(){qq.each(h,function(b,a){this.cancel(a)});h=[]},getName:function(a){return g.getName(a)},getSize:function(a){if(g.getSize){return g.getSize(a)}},getFile:function(a){if(g.getFile){return g.getFile(a)}},getQueue:function(){return h},reset:function(){k("Resetting upload handler");h=[];g.reset()},getUuid:function(a){return g.getUuid(a)},isValid:function(a){return g.isValid(a)},getResumableFilesData:function(){if(g.getResumableFilesData){return g.getResumableFilesData()}return[]}}};qq.UploadHandlerForm=function(o,uploadCompleteCallback,logCallback){var options=o,inputs=[],uuids=[],detachLoadEvents={},uploadComplete=uploadCompleteCallback,log=logCallback,api;function attachLoadEvent(iframe,callback){detachLoadEvents[iframe.id]=qq(iframe).attach("load",function(){log("Received response for "+iframe.id);if(!iframe.parentNode){return}try{if(iframe.contentDocument&&iframe.contentDocument.body&&iframe.contentDocument.body.innerHTML=="false"){return}}catch(error){log("Error when attempting to access iframe during handling of upload response ("+error+")","error")}callback()})}function getIframeContentJson(iframe){var response;try{var doc=iframe.contentDocument||iframe.contentWindow.document,innerHTML=doc.body.innerHTML;log("converting iframe's innerHTML to JSON");log("innerHTML = "+innerHTML);if(innerHTML&&innerHTML.match(/^<pre/i)){innerHTML=doc.body.firstChild.firstChild.nodeValue}response=eval("("+innerHTML+")")}catch(error){log("Error when attempting to parse form upload response ("+error+")","error");response={success:false}}return response}function createIframe(id){var iframe=qq.toElement('<iframe src="javascript:false;" name="'+id+'" />');iframe.setAttribute("id",id);iframe.style.display="none";document.body.appendChild(iframe);return iframe}function createForm(id,iframe){var params=options.paramsStore.getParams(id),protocol=options.demoMode?"GET":"POST",form=qq.toElement('<form method="'+protocol+'" enctype="multipart/form-data"></form>'),endpoint=options.endpointStore.getEndpoint(id),url=endpoint;params[options.uuidParamName]=uuids[id];if(!options.paramsInBody){url=qq.obj2url(params,endpoint)}else{qq.obj2Inputs(params,form)}form.setAttribute("action",url);form.setAttribute("target",iframe.name);form.style.display="none";document.body.appendChild(form);return form}api={add:function(fileInput){fileInput.setAttribute("name",options.inputName);var id=inputs.push(fileInput)-1;uuids[id]=qq.getUniqueId();if(fileInput.parentNode){qq(fileInput).remove()}return id},getName:function(id){return inputs[id].value.replace(/.*(\/|\\)/,"")},isValid:function(id){return inputs[id]!==undefined},reset:function(){qq.UploadHandler.prototype.reset.apply(this,arguments);inputs=[];uuids=[];detachLoadEvents={}},getUuid:function(id){return uuids[id]},cancel:function(id){options.onCancel(id,this.getName(id));delete inputs[id];delete uuids[id];delete detachLoadEvents[id];var iframe=document.getElementById(id);if(iframe){iframe.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;");qq(iframe).remove()}},upload:function(id){var input=inputs[id],fileName=api.getName(id),iframe=createIframe(id),form=createForm(id,iframe);if(!input){throw new Error("file with passed id was not added, or already uploaded or cancelled")}options.onUpload(id,this.getName(id));form.appendChild(input);attachLoadEvent(iframe,function(){log("iframe loaded");var response=getIframeContentJson(iframe);setTimeout(function(){detachLoadEvents[id]();delete detachLoadEvents[id];qq(iframe).remove()},1);if(!response.success){if(options.onAutoRetry(id,fileName,response)){return}}options.onComplete(id,fileName,response);uploadComplete(id)});log("Sending upload request for "+id);form.submit();qq(form).remove();return id}};return api};qq.UploadHandlerXhr=function(V,ai,ap){var ak=V,az=ai,av=ap,W=[],al="|",Y=ak.chunking.enabled&&qq.isFileChunkingSupported(),aq=ak.resume.enabled&&Y&&qq.areCookiesEnabled(),ae=ah(),ao=ak.forceMultipart||ak.paramsInBody,ax;function ar(a,b,e){var c=ax.getSize(a),d=ax.getName(a);b[ak.chunking.paramNames.partIndex]=e.part;b[ak.chunking.paramNames.partByteOffset]=e.start;b[ak.chunking.paramNames.chunkSize]=e.end-e.start;b[ak.chunking.paramNames.totalParts]=e.count;b[ak.totalFileSizeParamName]=c;if(ao){b[ak.chunking.paramNames.filename]=d}}function aj(a){a[ak.resume.paramNames.resuming]=true}function O(c,a,b){if(c.slice){return c.slice(a,b)}else{if(c.mozSlice){return c.mozSlice(a,b)}else{if(c.webkitSlice){return c.webkitSlice(a,b)}}}}function P(a,d){var b=ak.chunking.partSize,h=ax.getSize(a),f=W[a].file,c=b*d,e=c+b>=h?h:c+b,g=ab(a);return{part:d,start:c,end:e,count:g,blob:O(f,c,e)}}function ab(a){var c=ax.getSize(a),b=ak.chunking.partSize;return Math.ceil(c/b)}function X(a){W[a].xhr=new XMLHttpRequest();return W[a].xhr}function am(g,e,f,i){var h=new FormData(),d=ak.demoMode?"GET":"POST",c=ak.endpointStore.getEndpoint(i),j=c,a=ax.getName(i),b=ax.getSize(i);g[ak.uuidParamName]=W[i].uuid;if(ao){g[ak.totalFileSizeParamName]=b}if(!ak.paramsInBody){g[ak.inputName]=a;j=qq.obj2url(g,c)}e.open(d,j,true);if(ao){if(ak.paramsInBody){qq.obj2FormData(g,h)}h.append(ak.inputName,f);return h}return f}function ad(a,b){var c=ak.customHeaders,e=ax.getName(a),d=W[a].file;b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Cache-Control","no-cache");if(!ao){b.setRequestHeader("Content-Type","application/octet-stream");b.setRequestHeader("X-Mime-Type",d.type)}qq.each(c,function(g,f){b.setRequestHeader(g,f)})}function R(a,e,b){var d=ax.getName(a),c=ax.getSize(a);W[a].attemptingResume=false;ak.onProgress(a,d,c,c);ak.onComplete(a,d,e,b);delete W[a].xhr;az(a)}function o(a){var g=P(a,W[a].remainingChunkIdxs[0]),b=X(a),e=ax.getSize(a),f=ax.getName(a),d,c;if(W[a].loaded===undefined){W[a].loaded=0}an(a,g);b.onreadystatechange=ay(a,b);b.upload.onprogress=function(h){if(h.lengthComputable){if(W[a].loaded<e){var i=h.loaded+W[a].loaded;ak.onProgress(a,f,i,e)}}};ak.onUploadChunk(a,f,T(g));c=ak.paramsStore.getParams(a);ar(a,c,g);if(W[a].attemptingResume){aj(c)}d=am(c,b,g.blob,a);ad(a,b);av("Sending chunked upload request for "+a+": bytes "+(g.start+1)+"-"+g.end+" of "+e);b.send(d)}function ac(a,d,b){var c=W[a].remainingChunkIdxs.shift(),e=P(a,c);W[a].attemptingResume=false;W[a].loaded+=e.end-e.start;if(W[a].remainingChunkIdxs.length>0){o(a)}else{au(a);R(a,d,b)}}function Q(a,b){return a.status!==200||!b.success||b.reset}function aA(a){var c;try{c=qq.parseJson(a.responseText)}catch(b){av("Error when attempting to parse xhr response text ("+b+")","error");c={}}return c}function aw(a){av("Server has ordered chunking effort to be restarted on next attempt for file ID "+a,"error");if(aq){au(a)}W[a].remainingChunkIdxs=[];delete W[a].loaded}function U(a){W[a].attemptingResume=false;av("Server has declared that it cannot handle resume for file ID "+a+" - starting from the first chunk","error");ax.upload(a,true)}function af(a,d,b){var c=ax.getName(a);if(ak.onAutoRetry(a,c,d,b)){return}else{R(a,d,b)}}function aa(a,b){var c;if(!W[a]){return}av("xhr - server response received for "+a);av("responseText = "+b.responseText);c=aA(b);if(Q(b,c)){if(c.reset){aw(a)}if(W[a].attemptingResume&&c.reset){U(a)}else{af(a,c,b)}}else{if(Y){ac(a,c,b)}else{R(a,c,b)}}}function T(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}}function ay(a,b){return function(){if(b.readyState===4){aa(a,b)}}}function an(a,e){var f=ax.getUuid(a),b=at(a),c=f+al+e.part,d=ak.resume.cookiesExpireIn;qq.setCookie(b,c,d)}function au(a){var b=at(a);qq.deleteCookie(b)}function Z(a){var e=qq.getCookie(at(a)),b,d,c;if(e){b=e.indexOf(al);d=e.substr(0,b);c=parseInt(e.substr(b+1,e.length-b),10);return{uuid:d,part:c}}}function at(a){var c=ax.getName(a),e=ax.getSize(a),d=ak.chunking.partSize,b;b="qqfilechunk"+al+encodeURIComponent(c)+al+e+al+d;if(ae!==undefined){b+=al+ae}return b}function ah(){if(ak.resume.id!==null&&ak.resume.id!==undefined&&!qq.isFunction(ak.resume.id)&&!qq.isObject(ak.resume.id)){return ak.resume.id}}function S(a,f){var e=ax.getName(a),g=0,b,c,d;if(!W[a].remainingChunkIdxs||W[a].remainingChunkIdxs.length===0){W[a].remainingChunkIdxs=[];if(aq&&!f){b=Z(a);if(b){c=P(a,b.part);if(ak.onResume(a,e,T(c))!==false){g=b.part;W[a].uuid=b.uuid;W[a].loaded=c.start;W[a].attemptingResume=true;av("Resuming "+e+" at partition index "+g)}}}for(d=ab(a)-1;d>=g;d-=1){W[a].remainingChunkIdxs.unshift(d)}}o(a)}function ag(a){var e=W[a].file,f=ax.getName(a),b,c,d;W[a].loaded=0;b=X(a);b.upload.onprogress=function(g){if(g.lengthComputable){W[a].loaded=g.loaded;ak.onProgress(a,f,g.loaded,g.total)}};b.onreadystatechange=ay(a,b);c=ak.paramsStore.getParams(a);d=am(c,b,e,a);ad(a,b);av("Sending upload request for "+a);b.send(d)}ax={add:function(b){if(!(b instanceof File)){throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)")}var a=W.push({file:b})-1;W[a].uuid=qq.getUniqueId();return a},getName:function(a){var b=W[a].file;return(b.fileName!==null&&b.fileName!==undefined)?b.fileName:b.name},getSize:function(a){var b=W[a].file;return b.fileSize!=null?b.fileSize:b.size},getFile:function(a){if(W[a]){return W[a].file}},getLoaded:function(a){return W[a].loaded||0},isValid:function(a){return W[a]!==undefined},reset:function(){W=[]},getUuid:function(a){return W[a].uuid},upload:function(a,c){var b=this.getName(a);ak.onUpload(a,b);if(Y){S(a,c)}else{ag(a)}},cancel:function(a){ak.onCancel(a,this.getName(a));if(W[a].xhr){W[a].xhr.abort()}if(aq){au(a)}delete W[a]},getResumableFilesData:function(){var b=[],a=[];if(Y&&aq){if(ae===undefined){b=qq.getCookieNames(new RegExp("^qqfilechunk\\"+al+".+\\"+al+"\\d+\\"+al+ak.chunking.partSize+"="))}else{b=qq.getCookieNames(new RegExp("^qqfilechunk\\"+al+".+\\"+al+"\\d+\\"+al+ak.chunking.partSize+"\\"+al+ae+"="))}qq.each(b,function(e,c){var d=c.split(al);var f=qq.getCookie(c).split(al);a.push({name:decodeURIComponent(d[1]),size:d[2],uuid:f[0],partIdx:f[1]})});return a}return[]}};return ax};(function(r){var q,l,m,t,n,u,p,v,s,o;u=["uploaderType"];m=function(b){if(b){var a=v(b);p(a);if(n("uploaderType")==="basic"){q(new qq.FineUploaderBasic(a))}else{q(new qq.FineUploader(a))}}return l};t=function(b,c){var a=l.data("fineuploader");if(c){if(a===undefined){a={}}a[b]=c;l.data("fineuploader",a)}else{if(a===undefined){return null}return a[b]}};q=function(a){return t("uploader",a)};n=function(b,a){return t(b,a)};p=function(b){var a=b.callbacks={};r.each(new qq.FineUploaderBasic()._options.callbacks,function(c,d){var e,f;e=/^on(\w+)/.exec(c)[1];e=e.substring(0,1).toLowerCase()+e.substring(1);f=l;a[c]=function(){var g=Array.prototype.slice.call(arguments);return f.triggerHandler(e,g)}})};v=function(d,a){var c,b;if(a===undefined){if(d.uploaderType!=="basic"){c={element:l[0]}}else{c={}}}else{c=a}r.each(d,function(e,f){if(r.inArray(e,u)>=0){n(e,f)}else{if(f instanceof r){c[e]=f[0]}else{if(r.isPlainObject(f)){c[e]={};v(f,c[e])}else{if(r.isArray(f)){b=[];r.each(f,function(h,g){if(g instanceof r){r.merge(b,g)}else{b.push(g)}});c[e]=b}else{c[e]=f}}}}});if(a===undefined){return c}};s=function(a){return r.type(a)==="string"&&!a.match(/^_/)&&q()[a]!==undefined};o=function(c){var a=[],b=Array.prototype.slice.call(arguments,1);v(b,a);return q()[c].apply(q(),a)};r.fn.fineUploader=function(d){var a=this,b=arguments,c=[];this.each(function(f,e){l=r(e);if(q()&&s(d)){c.push(o.apply(a,b));if(a.length===1){return false}}else{if(typeof d==="object"||!d){m.apply(a,b)}else{r.error("Method "+d+" does not exist on jQuery.fineUploader")}}});if(c.length===1){return c[0]}else{if(c.length>1){return c}}return this}}(jQuery));qq.FineUploaderBasic=function(c){var d=this;this._options={debug:false,button:null,multiple:true,maxConnections:3,disableCancelForFormUploads:false,autoUpload:true,request:{endpoint:"/server/upload",params:{},paramsInBody:false,customHeaders:{},forceMultipart:true,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,stopOnFirstInvalidFile:true},callbacks:{onSubmit:function(a,b){},onComplete:function(a,b,f){},onCancel:function(a,b){},onUpload:function(a,b){},onUploadChunk:function(a,b,f){},onResume:function(a,b,f){},onProgress:function(a,b,h,g){},onError:function(a,b,f){},onAutoRetry:function(a,b,f){},onManualRetry:function(a,b){},onValidateBatch:function(a){},onValidate:function(a){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:false,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:false,partSize:2000000,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:false,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(a){if(a.length>33){a=a.slice(0,19)+"..."+a.slice(-14)}return a},text:{sizeSymbols:["kB","MB","GB","TB","PB","EB"]}};qq.extend(this._options,c,true);this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport();this._filesInProgress=[];this._storedFileIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._paramsStore=this._createParamsStore();this._endpointStore=this._createEndpointStore();this._handler=this._createUploadHandler();if(this._options.button){this._button=this._createUploadButton(this._options.button)}this._preventLeaveInProgress()};qq.FineUploaderBasic.prototype={log:function(d,c){if(this._options.debug&&(!c||c==="info")){qq.log("[FineUploader] "+d)}else{if(c&&c!=="info"){qq.log("[FineUploader] "+d,c)}}},setParams:function(c,d){if(d==null){this._options.request.params=c}else{this._paramsStore.setParams(c,d)}},setEndpoint:function(c,d){if(d==null){this._options.request.endpoint=c}else{this._endpointStore.setEndpoint(c,d)}},getInProgress:function(){return this._filesInProgress.length},uploadStoredFiles:function(){var b;while(this._storedFileIds.length){b=this._storedFileIds.shift();this._filesInProgress.push(b);this._handler.upload(b)}},clearStoredFiles:function(){this._storedFileIds=[]},retry:function(b){if(this._onBeforeManualRetry(b)){this._handler.retry(b);return true}else{return false}},cancel:function(b){this._handler.cancel(b)},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._filesInProgress=[];this._storedFileIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._button.reset();this._paramsStore.reset();this._endpointStore.reset()},addFiles:function(j){var g=this,h=[],f,i;if(j){if(!window.FileList||!(j instanceof FileList)){j=[].concat(j)}for(f=0;f<j.length;f+=1){i=j[f];if(qq.isFileOrInput(i)){h.push(i)}else{g.log(i+" is not a File or INPUT element!  Ignoring!","warn")}}this.log("Processing "+h.length+" files or inputs...");this._uploadFileList(h)}},getUuid:function(b){return this._handler.getUuid(b)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(b){return this._handler.getSize(b)},getFile:function(b){return this._handler.getFile(b)},_createUploadButton:function(f){var e=this;var d=new qq.UploadButton({element:f,multiple:this._options.multiple&&qq.isXhrUploadSupported(),acceptFiles:this._options.validation.acceptFiles,onChange:function(a){e._onInputChange(a)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});this._disposeSupport.addDisposer(function(){d.dispose()});return d},_createUploadHandler:function(){var b=this;return new qq.UploadHandler({debug:this._options.debug,forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,log:function(a,d){b.log(a,d)},onProgress:function(f,g,a,h){b._onProgress(f,g,a,h);b._options.callbacks.onProgress(f,g,a,h)},onComplete:function(f,g,a,h){b._onComplete(f,g,a,h);b._options.callbacks.onComplete(f,g,a)},onCancel:function(d,a){b._onCancel(d,a);b._options.callbacks.onCancel(d,a)},onUpload:function(d,a){b._onUpload(d,a);b._options.callbacks.onUpload(d,a)},onUploadChunk:function(e,f,a){b._options.callbacks.onUploadChunk(e,f,a)},onResume:function(e,f,a){return b._options.callbacks.onResume(e,f,a)},onAutoRetry:function(f,g,h,a){b._preventRetries[f]=h[b._options.retry.preventRetryResponseProperty];if(b._shouldAutoRetry(f,g,h)){b._maybeParseAndSendUploadError(f,g,h,a);b._options.callbacks.onAutoRetry(f,g,b._autoRetries[f]+1);b._onBeforeAutoRetry(f,g);b._retryTimeouts[f]=setTimeout(function(){b._onAutoRetry(f,g,h)},b._options.retry.autoAttemptDelay*1000);return true}else{return false}}})},_preventLeaveInProgress:function(){var b=this;this._disposeSupport.attach(window,"beforeunload",function(a){if(!b._filesInProgress.length){return}var a=a||window.event;a.returnValue=b._options.messages.onLeave;return b._options.messages.onLeave})},_onSubmit:function(c,d){if(this._options.autoUpload){this._filesInProgress.push(c)}},_onProgress:function(g,h,f,e){},_onComplete:function(g,h,f,e){this._removeFromFilesInProgress(g);this._maybeParseAndSendUploadError(g,h,f,e)},_onCancel:function(f,d){this._removeFromFilesInProgress(f);clearTimeout(this._retryTimeouts[f]);var e=qq.indexOf(this._storedFileIds,f);if(!this._options.autoUpload&&e>=0){this._storedFileIds.splice(e,1)}},_removeFromFilesInProgress:function(c){var d=qq.indexOf(this._filesInProgress,c);if(d>=0){this._filesInProgress.splice(d,1)}},_onUpload:function(c,d){},_onInputChange:function(b){if(qq.isXhrUploadSupported()){this.addFiles(b.files)}else{this.addFiles(b)}this._button.reset()},_onBeforeAutoRetry:function(c,d){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+d+"...")},_onAutoRetry:function(f,d,e){this.log("Retrying "+d+"...");this._autoRetries[f]++;this._handler.retry(f)},_shouldAutoRetry:function(f,d,e){if(!this._preventRetries[f]&&this._options.retry.enableAuto){if(this._autoRetries[f]===undefined){this._autoRetries[f]=0}return this._autoRetries[f]<this._options.retry.maxAutoAttempts}return false},_onBeforeManualRetry:function(c){if(this._preventRetries[c]){this.log("Retries are forbidden for id "+c,"warn");return false}else{if(this._handler.isValid(c)){var d=this._handler.getName(c);if(this._options.callbacks.onManualRetry(c,d)===false){return false}this.log("Retrying upload for '"+d+"' (id: "+c+")...");this._filesInProgress.push(c);return true}else{this.log("'"+c+"' is not a valid file ID","error");return false}}},_maybeParseAndSendUploadError:function(h,i,f,j){if(!f.success){if(j&&j.status!==200&&!f.error){this._options.callbacks.onError(h,i,"XHR returned response code "+j.status)}else{var g=f.error?f.error:"Upload failure reason unknown";this._options.callbacks.onError(h,i,g)}}},_uploadFileList:function(g){var h,f,e;h=this._getValidationDescriptors(g);e=this._options.callbacks.onValidateBatch(h)===false;if(!e){if(g.length>0){for(f=0;f<g.length;f++){if(this._validateFile(g[f])){this._uploadFile(g[f])}else{if(this._options.validation.stopOnFirstInvalidFile){return}}}}else{this._error("noFilesError","")}}},_uploadFile:function(e){var f=this._handler.add(e);var d=this._handler.getName(f);if(this._options.callbacks.onSubmit(f,d)!==false){this._onSubmit(f,d);if(this._options.autoUpload){this._handler.upload(f)}else{this._storeFileForLater(f)}}},_storeFileForLater:function(b){this._storedFileIds.push(b)},_validateFile:function(g){var f,e,h;f=this._getValidationDescriptor(g);e=f.name;h=f.size;if(this._options.callbacks.onValidate(f)===false){return false}if(!this._isAllowedExtension(e)){this._error("typeError",e);return false}else{if(h===0){this._error("emptyError",e);return false}else{if(h&&this._options.validation.sizeLimit&&h>this._options.validation.sizeLimit){this._error("sizeError",e);return false}else{if(h&&h<this._options.validation.minSizeLimit){this._error("minSizeError",e);return false}}}}return true},_error:function(i,h){var j=this._options.messages[i];function f(b,a){j=j.replace(b,a)}var g=this._options.validation.allowedExtensions.join(", ").toLowerCase();f("{file}",this._options.formatFileName(h));f("{extensions}",g);f("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit));f("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit));this._options.callbacks.onError(null,h,j);return j},_isAllowedExtension:function(f){var d=this._options.validation.allowedExtensions,e=false;if(!d.length){return true}qq.each(d,function(c,a){var b=new RegExp("\\."+a+"$","i");if(f.match(b)!=null){e=true;return false}});return e},_formatSize:function(d){var c=-1;do{d=d/1024;c++}while(d>99);return Math.max(d,0.1).toFixed(1)+this._options.text.sizeSymbols[c]},_wrapCallbacks:function(){var e,d;e=this;d=function(c,a,h){try{return a.apply(e,h)}catch(b){e.log("Caught exception in '"+c+"' callback - "+b.message,"error")}};for(var f in this._options.callbacks){(function(){var a,b;a=f;b=e._options.callbacks[a];e._options.callbacks[a]=function(){return d(a,b,arguments)}}())}},_parseFileName:function(c){var d;if(c.value){d=c.value.replace(/.*(\/|\\)/,"")}else{d=(c.fileName!==null&&c.fileName!==undefined)?c.fileName:c.name}return d},_parseFileSize:function(c){var d;if(!c.value){d=(c.fileSize!==null&&c.fileSize!==undefined)?c.fileSize:c.size}return d},_getValidationDescriptor:function(g){var e,h,f;f={};e=this._parseFileName(g);h=this._parseFileSize(g);f.name=e;if(h){f.size=h}return f},_getValidationDescriptors:function(d){var e=this,f=[];qq.each(d,function(b,a){f.push(e._getValidationDescriptor(a))});return f},_createParamsStore:function(){var d={},c=this;return{setParams:function(a,b){var f={};qq.extend(f,a);d[b]=f},getParams:function(a){var b={};if(a!=null&&d[a]){qq.extend(b,d[a])}else{qq.extend(b,c._options.request.params)}return b},remove:function(a){return delete d[a]},reset:function(){d={}}}},_createEndpointStore:function(){var c={},d=this;return{setEndpoint:function(a,b){c[b]=a},getEndpoint:function(a){if(a!=null&&c[a]){return c[a]}return d._options.request.endpoint},remove:function(a){return delete c[a]},reset:function(){c={}}}}};qq.FineUploader=function(b){qq.FineUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:true,disableDefaultDropzone:false},text:{uploadButton:"Choose or drag and drop a video from your computer",descriptionButtonText:"MOV, AVI, MPEG-4 - 1000MB file limit",cancelButton:"Cancel",retryButton:"Retry",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+((!this._options.dragAndDrop||!this._options.dragAndDrop.disableDefaultDropzone)?'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>':"")+(!this._options.button?'<div class="qq-upload-button"><div class="qq-upload-header">{uploadButtonText}</div><div>{descriptionButtonText}</div></div>':"")+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(!this._options.listElement?'<ul class="qq-upload-list"></ul>':"")+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:true},messages:{tooManyFilesError:"You may only drop one file"},retry:{showAutoRetryNote:true,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:false},showMessage:function(a){setTimeout(function(){alert(a)},0)}},true);qq.extend(this._options,b,true);this._wrapCallbacks();this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone);this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton);this._options.template=this._options.template.replace(/\{descriptionButtonText\}/g,this._options.text.descriptionButtonText);this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,this._options.text.dropProcessing);this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton);this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton);this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,"");this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;if(!this._button){this._button=this._createUploadButton(this._find(this._element,"button"))}this._bindCancelAndRetryEvents();this._dnd=this._setupDragAndDrop()};qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype);qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(b){this._dnd.setupExtraDropzone(b)},removeExtraDropzone:function(b){return this._dnd.removeExtraDropzone(b)},getItemByFileId:function(c){var d=this._listElement.firstChild;while(d){if(d.qqFileId==c){return d}d=d.nextSibling}},cancel:function(d){qq.FineUploaderBasic.prototype.cancel.apply(this,arguments);var c=this.getItemByFileId(d);qq(c).remove()},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments);this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");if(!this._options.button){this._button=this._createUploadButton(this._find(this._element,"button"))}this._bindCancelAndRetryEvents();this._dnd.dispose();this._dnd=this._setupDragAndDrop()},_setupDragAndDrop:function(){var g=this,h=this._find(this._element,"dropProcessing"),j,i,f;i=function(a){a.preventDefault()};if(!this._options.dragAndDrop.disableDefaultDropzone){f=this._find(this._options.element,"drop")}j=new qq.DragAndDrop({dropArea:f,extraDropzones:this._options.dragAndDrop.extraDropzones,hideDropzones:this._options.dragAndDrop.hideDropzones,multiple:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{dropProcessing:function(b,a){var c=g._button.getInput();if(b){qq(h).css({display:"block"});qq(c).attach("click",i)}else{qq(h).hide();qq(c).detach("click",i)}if(a){g.addFiles(a)}},error:function(a,b){g._error(a,b)},log:function(b,a){g.log(b,a)}}});j.setup();return j},_leaving_document_out:function(b){return((qq.chrome()||(qq.safari()&&qq.windows()))&&b.clientX==0&&b.clientY==0)||(qq.firefox()&&!b.relatedTarget)},_storeFileForLater:function(c){qq.FineUploaderBasic.prototype._storeFileForLater.apply(this,arguments);var d=this.getItemByFileId(c);qq(this._find(d,"spinner")).hide()},_find:function(f,d){var e=qq(f).getByClass(this._options.classes[d])[0];if(!e){throw new Error("element not found "+d)}return e},_onSubmit:function(c,d){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(c,d)},_onProgress:function(t,r,q,n){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var l,p,m,o,s,k;l=this.getItemByFileId(t);p=this._find(l,"progressBar");o=Math.round(q/n*100);if(q===n){s=this._find(l,"cancel");qq(s).hide();qq(p).hide();qq(this._find(l,"statusText")).setText(this._options.text.waitingForResponse);m=this._formatSize(n)}else{m=this._formatProgress(q,n);qq(p).css({display:"block"})}qq(p).css({width:o+"%"});k=this._find(l,"size");qq(k).css({display:"inline"});qq(k).setText(m)},_onComplete:function(h,i,g,j){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var f=this.getItemByFileId(h);qq(this._find(f,"statusText")).clearText();qq(f).removeClass(this._classes.retrying);qq(this._find(f,"progressBar")).hide();if(!this._options.disableCancelForFormUploads||qq.isXhrUploadSupported()){qq(this._find(f,"cancel")).hide()}qq(this._find(f,"spinner")).hide();if(g.success){qq(f).addClass(this._classes.success);if(this._classes.successIcon){this._find(f,"finished").style.display="inline-block";qq(f).addClass(this._classes.successIcon)}}else{qq(f).addClass(this._classes.fail);if(this._classes.failIcon){this._find(f,"finished").style.display="inline-block";qq(f).addClass(this._classes.failIcon)}if(this._options.retry.showButton&&!this._preventRetries[h]){qq(f).addClass(this._classes.retryable)}this._controlFailureTextDisplay(f,g)}},_onUpload:function(f,d){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments);var e=this.getItemByFileId(f);this._showSpinner(e)},_onBeforeAutoRetry:function(k){var n,l,i,j,m,o,p;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments);n=this.getItemByFileId(k);l=this._find(n,"progressBar");this._showCancelLink(n);l.style.width=0;qq(l).hide();if(this._options.retry.showAutoRetryNote){j=this._find(n,"statusText");m=this._autoRetries[k]+1;o=this._options.retry.maxAutoAttempts;p=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,m);p=p.replace(/\{maxAuto\}/g,o);qq(j).setText(p);if(m===1){qq(n).addClass(this._classes.retrying)}}},_onBeforeManualRetry:function(c){if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments)){var d=this.getItemByFileId(c);this._find(d,"progressBar").style.width=0;qq(d).removeClass(this._classes.fail);qq(this._find(d,"statusText")).clearText();this._showSpinner(d);this._showCancelLink(d);return true}return false},_addToList:function(h,i){var f=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.isXhrUploadSupported()){var g=this._find(f,"cancel");qq(g).remove()}f.qqFileId=h;var j=this._find(f,"file");qq(j).setText(this._options.formatFileName(i));qq(this._find(f,"size")).hide();if(!this._options.multiple){this._clearList()}this._listElement.appendChild(f)},_clearList:function(){this._listElement.innerHTML="";this.clearStoredFiles()},_bindCancelAndRetryEvents:function(){var d=this,c=this._listElement;this._disposeSupport.attach(c,"click",function(a){a=a||window.event;var b=a.target||a.srcElement;if(qq(b).hasClass(d._classes.cancel)||qq(b).hasClass(d._classes.retry)){qq.preventDefault(a);var e=b.parentNode;while(e.qqFileId==undefined){e=b=b.parentNode}if(qq(b).hasClass(d._classes.cancel)){d.cancel(e.qqFileId)}else{qq(e).removeClass(d._classes.retryable);d.retry(e.qqFileId)}}})},_formatProgress:function(g,f){var h=this._options.text.formatProgress;function e(b,a){h=h.replace(b,a)}e("{percent}",Math.round(g/f*100));e("{total_size}",this._formatSize(f));return h},_controlFailureTextDisplay:function(n,h){var k,m,i,j,l;k=this._options.failedUploadTextDisplay.mode;m=this._options.failedUploadTextDisplay.maxChars;i=this._options.failedUploadTextDisplay.responseProperty;if(k==="custom"){j=h[i];if(j){if(j.length>m){l=j.substring(0,m)+"..."}}else{j=this._options.text.failUpload;this.log("'"+i+"' is not a valid property on the server response.","warn")}qq(this._find(n,"statusText")).setText(l||j);if(this._options.failedUploadTextDisplay.enableTooltip){this._showTooltip(n,j)}}else{if(k==="default"){qq(this._find(n,"statusText")).setText(this._options.text.failUpload)}else{if(k!=="none"){this.log("failedUploadTextDisplay.mode value of '"+k+"' is not valid","warn")}}}},_showTooltip:function(d,c){d.title=c},_showSpinner:function(d){var c=this._find(d,"spinner");c.style.display="inline-block"},_showCancelLink:function(c){if(!this._options.disableCancelForFormUploads||qq.isXhrUploadSupported()){var d=this._find(c,"cancel");d.style.display="inline"}},_error:function(d,f){var e=qq.FineUploaderBasic.prototype._error.apply(this,arguments);this._options.showMessage(e)}});$(document).ready(function(){var d=function(h,a,b,g){qq.log("id: "+a+", fileName: "+b+", reason: "+g)};var c=new qq.FineUploader({element:$("#framebaseuploader")[0],debug:true,request:{endpoint:"/upload/receiver"},callbacks:{onError:d}})});